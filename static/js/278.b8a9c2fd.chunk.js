"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[278],{696:function(e,t,n){n.d(t,{e4:function(){return s}});var r=n(433),a=n(861),c=n(757),u=n.n(c),o="https://api.themoviedb.org",s=function(){var e={method:"GET",headers:{accept:"application/json",Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJmYmZjN2MyNTFiZmJiNGYyYTYyOWQ3OWZjODUxYzk2MiIsInN1YiI6IjY1MTQzYTdhMDQ5OWYyMDBjNDRlNGM2ZiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.-UwuvmS3Ac7UsOsmkCWf06jkz4EgzBhRbq6LeCEPWq0")}},t=function(){var t=(0,a.Z)(u().mark((function t(){var n,a,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(o,"/3/trending/movie/day?language=en-US"),e);case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,c=a.results.map((function(e){return{id:e.id,title:e.title}})),t.abrupt("return",(0,r.Z)(c));case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),n=function(){var t=(0,a.Z)(u().mark((function t(n){var r,a,c,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(o,"/3/movie/").concat(n,"?language=en-US"),e);case 3:return r=t.sent,t.next=6,r.json();case 6:return a=t.sent,c=a.genres.map((function(e){return e.name})),s={title:a.title,release_year:a.release_date.slice(0,4),poster:a.poster_path?"https://image.tmdb.org/t/p/w342/"+a.poster_path:"https://placehold.co/342x513",score:0!==a.vote_average?a.vote_average:"No score yet",overview:a.overview,genres:c},t.abrupt("return",s);case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=(0,a.Z)(u().mark((function t(n){var a,c,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(o,"/3/movie/").concat(n,"/credits?language=en-US"),e);case 3:return a=t.sent,t.next=6,a.json();case 6:return c=t.sent,s=c.cast.map((function(e){return{id:e.id,name:e.name,character:e.character,photo:e.profile_path?"https://image.tmdb.org/t/p/w185"+e.profile_path:"https://placehold.co/185x278"}})),t.abrupt("return",(0,r.Z)(s));case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=(0,a.Z)(u().mark((function t(n){var a,c,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(o,"/3/movie/").concat(n,"/reviews?language=en-US&page=1}"),e);case 3:return a=t.sent,t.next=6,a.json();case 6:return c=t.sent,s=c.results.map((function(e){return{id:e.id,author:e.author,content:e.content,url:e.url}})),t.abrupt("return",(0,r.Z)(s));case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=(0,a.Z)(u().mark((function t(n,r){var a,c,s,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(o,"/3/search/movie?query=").concat(n,"&include_adult=false&language=en-US&page=").concat(r),e);case 3:return a=t.sent,t.next=6,a.json();case 6:return c=t.sent,s=c.total_pages,i=c.results.map((function(e){return{id:e.id,title:e.title,release_year:e.release_date.slice(0,4)}})),t.abrupt("return",{results:i,pageCount:s});case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n){return t.apply(this,arguments)}}();return{getTrending:t,getDetails:n,getCast:c,getReviews:s,getSearch:i}}},278:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var r=n(861),a=n(439),c=n(757),u=n.n(c),o=n(696),s=n(791),i=n(87),p=n(184),l=(0,s.lazy)((function(){return n.e(164).then(n.bind(n,945))})),f=(0,s.lazy)((function(){return n.e(605).then(n.bind(n,605))}));function h(){var e=(0,s.useState)(0),t=(0,a.Z)(e,2),n=t[0],c=t[1],h=(0,s.useState)(0),v=(0,a.Z)(h,2),g=v[0],d=v[1],m=(0,s.useState)([]),y=(0,a.Z)(m,2),x=y[0],w=y[1],Z=(0,i.lr)(),j=(0,a.Z)(Z,2),_=j[0],b=j[1],k=(0,o.e4)().getSearch,S=function(){var e=(0,r.Z)(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t,n);case 2:r=e.sent,c(r.pageCount),w(r.results);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){var e=_.get("query");if(!e)return c(0),d(0),void w([]);var t=_.get("page"),n=t?Number(t):1;d(n),S(e,n)}),[_]);return(0,p.jsxs)("div",{children:[(0,p.jsx)(l,{handleSearch:function(e){e.preventDefault();var t=e.currentTarget.elements.search.value;b({query:t,page:1}),d(1),S(t,1)}}),x&&x.map((function(e){var t="/movies/".concat(e.id);return(0,p.jsxs)(i.rU,{to:t,state:{from:"/movies/?query=".concat(_.get("query"),"&page=").concat(g)},children:[e.title," (",e.release_year,")"]},e.id)})),n>1&&(0,p.jsx)(f,{page:g,pageCount:n,handleNext:function(){var e=_.get("query"),t=g+1;d(t),S(e,t),b({query:e,page:t})},handlePrev:function(){var e=_.get("query"),t=g-1;d(t),S(e,t),b({query:e,page:t})}})]})}},861:function(e,t,n){function r(e,t,n,r,a,c,u){try{var o=e[c](u),s=o.value}catch(i){return void n(i)}o.done?t(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,c){var u=e.apply(t,n);function o(e){r(u,a,c,o,s,"next",e)}function s(e){r(u,a,c,o,s,"throw",e)}o(void 0)}))}}n.d(t,{Z:function(){return a}})}}]);
//# sourceMappingURL=278.b8a9c2fd.chunk.js.map