"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[881],{696:function(e,t,n){n.d(t,{e4:function(){return s}});var r=n(433),a=n(861),c=n(757),u=n.n(c),o="https://api.themoviedb.org",s=function(){var e={method:"GET",headers:{accept:"application/json",Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJmYmZjN2MyNTFiZmJiNGYyYTYyOWQ3OWZjODUxYzk2MiIsInN1YiI6IjY1MTQzYTdhMDQ5OWYyMDBjNDRlNGM2ZiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.-UwuvmS3Ac7UsOsmkCWf06jkz4EgzBhRbq6LeCEPWq0")}},t=function(){var t=(0,a.Z)(u().mark((function t(){var n,a,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(o,"/3/trending/movie/day?language=en-US"),e);case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,c=a.results.map((function(e){return{id:e.id,title:e.title}})),t.abrupt("return",(0,r.Z)(c));case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),n=function(){var t=(0,a.Z)(u().mark((function t(n){var r,a,c,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(o,"/3/movie/").concat(n,"?language=en-US"),e);case 3:return r=t.sent,t.next=6,r.json();case 6:return a=t.sent,c=a.genres.map((function(e){return e.name})),s={title:a.title,release_year:a.release_date.slice(0,4),poster:a.poster_path?"https://image.tmdb.org/t/p/w342/"+a.poster_path:"https://placehold.co/342x513",score:0!==a.vote_average?a.vote_average:"No score yet",overview:a.overview,genres:c},t.abrupt("return",s);case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=(0,a.Z)(u().mark((function t(n){var a,c,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(o,"/3/movie/").concat(n,"/credits?language=en-US"),e);case 3:return a=t.sent,t.next=6,a.json();case 6:return c=t.sent,s=c.cast.map((function(e){return{id:e.id,name:e.name,character:e.character,photo:e.profile_path?"https://image.tmdb.org/t/p/w185"+e.profile_path:"https://placehold.co/185x278"}})),t.abrupt("return",(0,r.Z)(s));case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=(0,a.Z)(u().mark((function t(n){var a,c,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(o,"/3/movie/").concat(n,"/reviews?language=en-US&page=1}"),e);case 3:return a=t.sent,t.next=6,a.json();case 6:return c=t.sent,s=c.results.map((function(e){return{id:e.id,author:e.author,content:e.content,url:e.url}})),t.abrupt("return",(0,r.Z)(s));case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=(0,a.Z)(u().mark((function t(n,r){var a,c,s,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(o,"/3/search/movie?query=").concat(n,"&include_adult=false&language=en-US&page=").concat(r),e);case 3:return a=t.sent,t.next=6,a.json();case 6:return c=t.sent,s=c.total_pages,i=c.results.map((function(e){return{id:e.id,title:e.title,release_year:e.release_date.slice(0,4)}})),t.abrupt("return",{results:i,pageCount:s});case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n){return t.apply(this,arguments)}}();return{getTrending:t,getDetails:n,getCast:c,getReviews:s,getSearch:i}}},881:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var r=n(861),a=n(439),c=n(757),u=n.n(c),o=n(696),s=n(791),i=n(87),l="Movies_moviesContainer__RXtJy",p="Movies_moviesList__lstJL",f="Movies_moviesItem__2Ne0E",v=n(184),h=(0,s.lazy)((function(){return n.e(164).then(n.bind(n,945))})),d=(0,s.lazy)((function(){return n.e(235).then(n.bind(n,235))}));function g(){var e=(0,s.useState)(0),t=(0,a.Z)(e,2),n=t[0],c=t[1],g=(0,s.useState)(0),m=(0,a.Z)(g,2),y=m[0],x=m[1],_=(0,s.useState)([]),w=(0,a.Z)(_,2),Z=w[0],j=w[1],b=(0,i.lr)(),k=(0,a.Z)(b,2),N=k[0],J=k[1],S=(0,o.e4)().getSearch,q=function(){var e=(0,r.Z)(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t,n);case 2:r=e.sent,c(r.pageCount),j(r.results);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){var e=N.get("query");if(!e)return c(0),x(0),void j([]);var t=N.get("page"),n=t?Number(t):1;x(n),q(e,n)}),[N]);return(0,v.jsxs)("div",{className:l,children:[(0,v.jsx)(h,{handleSearch:function(e){e.preventDefault();var t=e.currentTarget.elements.search.value;J({query:t,page:1}),x(1),q(t,1)}}),(0,v.jsx)("ul",{className:p,children:Z&&Z.map((function(e){var t="/movies/".concat(e.id);return(0,v.jsx)("li",{className:f,children:(0,v.jsxs)(i.rU,{to:t,state:{from:"/movies/?query=".concat(N.get("query"),"&page=").concat(y)},children:[e.title," (",e.release_year,")"]})},e.id)}))}),n>1&&(0,v.jsx)(d,{page:y,pageCount:n,handleNext:function(){var e=N.get("query"),t=y+1;x(t),q(e,t),J({query:e,page:t})},handlePrev:function(){var e=N.get("query"),t=y-1;x(t),q(e,t),J({query:e,page:t})}})]})}},861:function(e,t,n){function r(e,t,n,r,a,c,u){try{var o=e[c](u),s=o.value}catch(i){return void n(i)}o.done?t(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,c){var u=e.apply(t,n);function o(e){r(u,a,c,o,s,"next",e)}function s(e){r(u,a,c,o,s,"throw",e)}o(void 0)}))}}n.d(t,{Z:function(){return a}})}}]);
//# sourceMappingURL=881.76d192f3.chunk.js.map